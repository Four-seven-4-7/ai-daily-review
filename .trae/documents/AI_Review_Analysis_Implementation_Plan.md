# AI 智能复盘分析功能开发计划 (修正版)

## 1. 核心变更点
根据您的反馈，**取消前端手动输入 API Key 的界面**。
改为**直接通过数据库脚本**将您的 API Key (`ms-00ce24c6...`) 预埋写入到 Supabase 数据库中，前端直接静默读取并使用。

## 2. 执行步骤

### 第一步：数据库初始化 (核心)
我将创建一个 SQL 迁移脚本 (`supabase/migrations/init_ai_settings.sql`) 并立即执行，完成以下操作：
1.  **建表**：创建 `user_settings` 表 (字段: `key`, `value`, `description`)。
2.  **写入 Key**：将您的 API Key `ms-00ce24c6-49ad-46e3-84a6-5bf105f78cc1` 直接插入到数据库中。
3.  **权限配置**：配置 RLS 策略，确保前端可以读取该配置。

### 第二步：前端功能开发
1.  **UI 入口**：在首页顶部添加 **“✨ AI 洞察”** 按钮。
2.  **交互流程**：
    *   点击按钮 -> 弹出日期选择器（默认“近 7 天”）。
    *   点击“生成报告” -> 系统自动执行以下链式操作：
        1.  **静默获取 Key**：从 `user_settings` 表读取刚才写入的 API Key。
        2.  **获取数据**：拉取指定范围内的复盘记录。
        3.  **AI 分析**：调用 Moonshot API (Kimi) 发送 prompt。
    *   **展示结果**：弹窗展示 Markdown 格式的分析报告。

### 第三步：验证与交付
*   确认点击按钮后，无需任何配置即可直接生成报告。
*   验证 API 调用链路：Supabase (Key) + Supabase (Data) -> Moonshot API -> Frontend。

此方案完全去除了前端配置环节，实现“开箱即用”。请确认是否执行？